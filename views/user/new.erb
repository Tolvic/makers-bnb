<!DOCTYPE html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <link type="image/x-icon" rel="icon" href="https://makers.tech/wp-content/themes/wp-makers-2018/favicon.ico">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <title>Makers BnB</title>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
</head>

<body>
  <h1>Makers BnB</h1>
  <form id="registration-form" action="/user" method="post">
    <input type="text" name="name" id="name" placeholder="Enter name" required="" autofocus="" />
    <input type="text" name="username" id="username" placeholder="Enter username" required="" />
    <input type="email" name="email_address" id="email_address" placeholder="Enter email address" required="" />
    <input type="text" name="telephone_number" id="telephone_number" placeholder="Enter number" required="" />
    <input type="password" name="password" id="password" placeholder="Enter password" required="" />
    <input type="submit" value="submit" id="submit" />
  </form>
  <script>
    $( "#registration-form" ).submit(function(event) {

      event.preventDefault();
      
      $.ajax({
      type: "POST",
      url: "/user/registered-check",
      dataType: 'json',
      data: {    
        username: $('#username').val(),
        email_address: $('#email_address').val(),
        telephone_number: $('#telephone_number').val()
        },
      success: function (data) {
          response = data.already_registered;

          if(response){
            alert('user is already registered');
          } else {
            alert("This user is not already been registered");
            function(event){ return true; }
          }
      }
      });  

      
    
    });

  </script>

</body>
